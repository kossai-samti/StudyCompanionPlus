{% extends 'front/base.html.twig' %}

{% block title %}Quiz #{{ quiz.id }}{% endblock %}

{% block content %}
  <p style="margin:0 0 10px"><a href="{{ path('quiz_index') }}" style="text-decoration:none;color:#6b44db;font-weight:700">‚Üê Back to quizzes</a></p>

  <article class="page-card" style="max-width:760px;margin:0 auto">
    <div style="display:flex;justify-content:space-between;gap:12px;align-items:center">
      <strong>{{ quiz.questions|length }} question{{ quiz.questions|length == 1 ? '' : 's' }}</strong>
      <span style="color:#695c99">Lesson: {{ quiz.lesson.title }}</span>
    </div>

    {% if quiz.questions|length > 0 %}
      <form method="post">
        <input type="hidden" name="_token" value="{{ csrf_token('submit_quiz_' ~ quiz.id) }}">
        {% for question in quiz.questions %}
          <section class="page-card" style="margin-top:12px;background:#fcfbff">
            <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
              <strong>Question {{ loop.index }} of {{ quiz.questions|length }}</strong>
              <small style="color:#6b5e9f">Difficulty: {{ quiz.difficulty }}</small>
            </div>
            <h2 style="margin:12px 0 10px">{{ question.text }}</h2>

            {% for option in question.options %}
              <label style="display:block;background:#faf8ff;border:1px solid #ddd2ff;border-radius:12px;padding:11px;margin-bottom:8px">
                <input type="radio" name="q_{{ question.id }}" value="{{ option }}"> {{ option }}
              </label>
            {% endfor %}
          </section>
        {% endfor %}
        <p style="margin-top:12px">
          <button type="submit" style="background:#ff6b61;color:#fff;border:none;border-radius:10px;padding:11px 14px;font-weight:700;cursor:pointer">Submit Quiz</button>
        </p>
      </form>
    {% else %}
      <section class="page-card" style="margin-top:12px;background:#fff7f7">
        <p style="margin:0">This quiz has no questions yet.</p>
      </section>
    {% endif %}
  </article>

  <section class="page-card" style="margin-top:14px">
    <h3 style="margin-top:0">After Submission</h3>
    <ul style="margin:0;padding-left:18px">
      <li>Answers are evaluated automatically.</li>
      <li>A PerformanceReport is generated.</li>
      <li>Weak topics are identified.</li>
      <li>Mastery status is updated.</li>
    </ul>
  </section>
{% endblock %}
