{% extends 'front/landing_base.html.twig' %}

{% block title %}StudyCompanionPlus | Landing{% endblock %}

{% block stylesheets %}
{{ parent() }}
<style>
    /* --- FLOATING ICONS STYLING --- */
    .floating-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 0;
        overflow: hidden;
    }

    .float-icon {
        position: absolute;
        font-size: 4rem;
        filter: drop-shadow(0 0 15px var(--neon-cyan)) opacity(0.3);
        animation: float-around 15s ease-in-out infinite;
        user-select: none;
    }

    @keyframes float-around {
        0%, 100% { transform: translateY(0) translateX(0) rotate(0deg); }
        33% { transform: translateY(-50px) translateX(20px) rotate(10deg); }
        66% { transform: translateY(20px) translateX(-20px) rotate(-10deg); }
    }

    .icon-1 { top: 15%; left: 10%; animation-duration: 18s; }
    .icon-2 { top: 60%; left: 5%; animation-duration: 22s; animation-delay: -2s; }
    .icon-3 { top: 25%; right: 8%; animation-duration: 20s; animation-delay: -5s; }
    .icon-4 { top: 75%; right: 12%; animation-duration: 25s; }
    .icon-5 { top: 45%; left: 80%; animation-duration: 19s; animation-delay: -3s; }
</style>
{% endblock %}

{% block content %}
<canvas id="neural-canvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; opacity: 0.3;"></canvas>

<div class="floating-container">
    <div class="float-icon icon-1">ğŸ§ </div>
    <div class="float-icon icon-2">ğŸ“</div>
    <div class="float-icon icon-3">ğŸ“š</div>
    <div class="float-icon icon-4">ğŸ”¬</div>
    <div class="float-icon icon-5">ğŸ“</div>
</div>

<div style="position: relative; z-index: 1;">
  <section class="container hero">
    <div>
      <h1 class="headline">Study smarter. Play harder. Repeat.</h1>
      <p class="lead">AI-powered study materials, adaptive quizzes, and live progress insights for every learner.</p>
      <p><a class="btn btn-yellow" href="{{ path('app_register') }}">Start Free</a></p>
    </div>
    <div>
      <article class="preview-card">
        <h3 style="color: var(--neon-cyan)">AI Product Preview</h3>
        <p>Auto-generated summaries, flashcards, quiz flows, and weak-topic detection in one place.</p>
        <div class="feature" style="margin-top:10px">
          <strong>Lesson: Algebra Basics</strong>
          <p style="margin:8px 0 0;color: var(--text-dim)">Summary ready, 12 flashcards generated, quiz confidence 83%.</p>
        </div>
      </article>
    </div>
  </section>

  <section class="container">
    <div class="stat-bar">
      {# Added IDs to these spans so the script can find them #}
      <div class="stat"><strong id="stat-students">14,200</strong>+<br>Active students</div>
      <div class="stat"><strong id="stat-success">93</strong>%<br>Success rate</div>
      <div class="stat"><strong id="stat-lessons">1,850</strong><br>Lessons generated</div>
      <div class="stat"><strong id="stat-rating">4.8</strong>/5<br>Teacher rating</div>
    </div>
  </section>

  <section class="container section">
    <h2>Features</h2>
    <div class="cards-3">
      <article class="feature"><div class="icon">ğŸ§ </div><h3>AI Summaries</h3><p>Concise, structured notes from uploaded lesson content.</p></article>
      <article class="feature"><div class="icon">ğŸ—‚ï¸</div><h3>Smart Flashcards</h3><p>Auto-generated cards to reinforce key concepts quickly.</p></article>
      <article class="feature"><div class="icon">ğŸ“ˆ</div><h3>Performance Tracking</h3><p>Identify weak topics and mastery progression over time.</p></article>
    </div>
  </section>

  <section class="container section">
    <div class="how">
      <h2 style="color: #fff">How It Works</h2>
      <div class="cards-3">
        <article class="step"><div class="step-num">1</div><h3>Upload Lesson</h3><p>Teacher uploads lesson content to the platform.</p></article>
        <article class="step"><div class="step-num">2</div><h3>Generate With AI</h3><p>AI creates summary, flashcards, and quiz questions.</p></article>
        <article class="step"><div class="step-num">3</div><h3>Practice & Improve</h3><p>Students study, take quiz, and review performance reports.</p></article>
      </div>
    </div>
  </section>

  <section class="container section">
    <h2>Testimonials</h2>
    <div class="cards-3">
      <article class="testimonial"><p>"The quiz feedback made it easy to target weak areas before exams."</p><strong>- Sam, Student</strong></article>
      <article class="testimonial"><p>"I save hours every week with AI-generated summaries and flashcards."</p><strong>- Jane, Teacher</strong></article>
      <article class="testimonial"><p>"The role-based dashboards are clear and easy for everyone to use."</p><strong>- Admin Team</strong></article>
    </div>
  </section>

  <section class="container">
    <div class="final-cta">
      <h2>Ready to level up learning?</h2>
      <p>Start building smarter study workflows today.</p>
      <a class="btn btn-yellow" href="{{ path('app_register') }}">Get Started Free</a>
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <div>
        <strong class="logo">StudyCompanion</strong>
        <p style="margin:8px 0 0">AI-enhanced learning for students, teachers, and admins.</p>
      </div>
      <div>
        <a href="{{ path('home') }}">Home</a>
        <a href="{{ path('app_login') }}">Sign In</a>
        <a href="{{ path('app_register') }}">Start Free</a>
      </div>
    </div>
  </footer>
</div>

{# --- SCRIPTS: Animation & Live Stats --- #}
<script>
// --- 1. Matrix Background Script ---
const canvas = document.getElementById('neural-canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
const data = "01ğŸ§ ğŸ“šğŸ“ğŸ§¬ğŸ”¬ğŸ“01âˆ‘Ï€Î©âˆ01";
const charArray = data.split("");
const fontSize = 16;
const columns = canvas.width / fontSize;
const drops = [];
for (let x = 0; x < columns; x++) { drops[x] = 1; }
function draw() {
    ctx.fillStyle = "rgba(7, 11, 20, 0.1)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "#00f3ff"; 
    ctx.font = fontSize + "px monospace";
    for (let i = 0; i < drops.length; i++) {
        const text = charArray[Math.floor(Math.random() * charArray.length)];
        ctx.fillText(text, i * fontSize, drops[i] * fontSize);
        if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) { drops[i] = 0; }
        drops[i]++;
    }
}
setInterval(draw, 33);

// --- 2. Live Random Stats Script ---
function updateLiveStats() {
    // Range: 14200 - 14300
    document.getElementById('stat-students').innerText = (Math.floor(Math.random() * (14300 - 14200 + 1)) + 14200).toLocaleString();
    
    // Range: 90 - 99
    document.getElementById('stat-success').innerText = Math.floor(Math.random() * (99 - 90 + 1)) + 90;
    
    // Range: 1850 - 1870
    document.getElementById('stat-lessons').innerText = (Math.floor(Math.random() * (1870 - 1850 + 1)) + 1850).toLocaleString();
    
    // Range: 4.0 - 4.8
    const rating = (Math.random() * (4.8 - 4.0) + 4.0).toFixed(1);
    document.getElementById('stat-rating').innerText = rating;
}

// Update stats every 2 seconds for a "live processing" feel
setInterval(updateLiveStats, 2000);
updateLiveStats(); // Initial call

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});
</script>
{% endblock %}